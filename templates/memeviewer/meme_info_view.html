{% extends 'memeviewer/base.html' %}
{% load static %}

{% block head_extra %}

    <meta property="og:title" content="LambdaBot meme #{{ meme.number }}"/>
    <meta property="og:type" content="article"/>
    <meta property="og:url" content="{{ meme.info_url }}"/>
    <meta property="og:image" content="{{ meme.url }}"/>
    <meta property="og:description" content="{{ meme.gen_date }}"/>

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@lambdabot3883">
    <meta name="twitter:creator" content="@lambdabot3883">
    <meta name="twitter:title" content="LambdaBot meme #{{ meme.number }}">
    <meta name="twitter:description" content="{{ meme.gen_date }}">
    <meta name="twitter:image" content="{{ meme.url }}">

    <title>LambdaBot meme #{{ meme.number }}</title>

{% endblock %}

{% block content %}

    <p id="date">
        meme #{{ meme.number }} - {{ meme.gen_date }}<br>
        {% if meme.facebookmeem %}
            facebook :: {{ meme.facebookmeem.page.name }}
        {% elif meme.twittermeem %}
            twitter :: {{ meme.twittermeem.page.name }} :: @{{ meme.twittermeem.page.handle }}
        {% elif meme.discordmeem %}
            discord ::
            {% if meme.discordmeem.discord_channel.server %}
                {{ meme.discordmeem.discord_channel.server.name }} :: #{{ meme.discordmeem.discord_channel.name }}
            {% else %}
                DM
            {% endif %}
        {% endif %}
    </p>

    <table>
        <tr>
            <td>
                <a href="{{ meme.url }}">
                    <img src="{{ meme.url }}" alt="meme"><br>
                </a>
                {% if meme.facebookmeem %}
                    <a href="https://facebook.com/{{  meme.facebookmeem.post }}" target="_blank">Facebook post</a>
                {% elif meme.twittermeem %}
                    <a href="https://twitter.com/statuses/{{ meme.twittermeem.post }}" target="_blank">Twitter post</a>
                {% endif %}
            </td>
        </tr>
        {% if meme.template_link.bgimage_url %}
            <tr>
                <th>
                    template
                </th>
            </tr>
            <tr>
                <td>
                    <a href="{{ meme.template_link.bgimage_url }}">
                        <img src="{{ meme.template_link.bgimage_url }}" alt="template bg">
                    </a>
                </td>
            </tr>
        {% endif %}
        {% if meme.template_link.image_url %}
            <tr>
                <th>
                    template overlay
                </th>
            </tr>
            <tr>
                <td>
                    <a href="{{ meme.template_link.image_url }}">
                        <img src="{{ meme.template_link.image_url }}" alt="template fg">
                    </a><br>
                </td>
            </tr>
        {% endif %}
        <tr><td>
            <p>{{ meme.template_link }}</p>
        </td></tr>
        <tr>
            <th>source images</th>
        </tr>
        {% for source_img in meme.sourceimgs %}
            <tr>
                <td>
                    <a href="{{ source_img.image_url }}">
                        <img src="{{ source_img.image_url }}" alt="source image">
                    </a>
                </td>
            </tr>
        {% endfor %}
    </table>

{% endblock %}
