{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta property="og:title" content="{{ bot_name }} meme #{{ meme.number }}"/>
    <meta property="og:type" content="article"/>
    <meta property="og:url" content="{{ meme.get_info_url }}"/>
    <meta property="og:image" content="{{ meme.get_url }}"/>
    <meta property="og:description" content="{{ meme.gen_date }}"/>

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@{{ bot_name_twitter }}">
    <meta name="twitter:creator" content="@{{ bot_name_twitter }}">
    <meta name="twitter:title" content="{{ bot_name }} meme #{{ meme.number }}">
    <meta name="twitter:description" content="{{ meme.gen_date }}">
    <meta name="twitter:image" content="{{ meme.get_url }}">

    <title>{{ bot_name }} meme #{{ meme.number }}</title>
    <link href="https://fonts.googleapis.com/css?family=Mukta+Malar" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="{% static 'memeviewer/memeviewer.css' %}?v=10">
</head>
<body>

<div id="fb-root"></div>
<div id="fb-root"></div>
<script>(function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s);
    js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.10&appId=100223894041175";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

<h1>{{ bot_name }}</h1>

<div id="social">
    <div class="fb-like" data-href="https://www.facebook.com/{{ bot_name_facebook }}" data-layout="button_count" data-action="like"
         data-size="large" data-show-faces="false" data-share="false"></div>

    <a href="https://twitter.com/{{ bot_name_twitter }}" class="twitter-follow-button" data-size="large"
       data-show-screen-name="false" data-show-count="false">Follow @{{ bot_name_twitter }}</a>
</div>

<p id="date">
    meme #{{ meme.number }} - {{ meme.gen_date }}
</p>

<table>
    <tr>
        <td>
            <a href="{{ meme.get_url }}">
                <img src="{{ meme.get_url }}" alt="meme">
            </a>
            <br><a href="{{ meme.get_info_url }}">This page</a>
            {% if facebook_url %}
                | <a href="https://facebook.com/{{  facebook_url }}" target="_blank">Facebook post</a>
            {% endif %}
            {% if twitter_url %}
                | <a href="https://twitter.com/{{ bot_name_twitter }}/status/{{ twitter_url }}" target="_blank">Twitter post</a>
            {% endif %}
            {% if perms.meem.change_meem %}
                | <a href="{{  meme.get_admin_url }}">Admin</a>
            {% endif %}
        </td>
    </tr>
    {% if meme.template_link.get_bgimage_url %}
        <tr>
            <th>
                template
            </th>
        </tr>
        <tr>
            <td>
                <a href="{{ meme.template_link.get_bgimage_url }}">
                    <img src="{{ meme.template_link.get_bgimage_url }}" alt="template bg">
                </a>
                <p>{{ meme.template_link }}</p>
            </td>
        </tr>
    {% endif %}
    {% if meme.template_link.get_image_url %}
        <tr>
            <th>
                template overlay
            </th>
        </tr>
        <tr>
            <td>
                <a href="{{ meme.template_link.get_image_url }}">
                    <img src="{{ meme.template_link.get_image_url }}" alt="template fg">
                </a><br>
            </td>
        </tr>
    {% endif %}
    <tr>
        <th>source images</th>
    </tr>
    {% for source_img in meme.get_sourceimgs_in_slots %}
        <tr>
            <td>
                <a href="{{ source_img.source_image.get_image_url }}">
                    <img src="{{ source_img.source_image.get_image_url }}" alt="source image">
                </a>
            </td>
        </tr>
    {% endfor %}
</table>

</body>
</html>
